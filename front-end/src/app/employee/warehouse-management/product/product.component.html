<div class="container-fluid">
  <div class="row d-flex justify-content-between m-3">
    <h2><span class="fa fa-bars"></span> Danh sách mặt hàng</h2>
    <div class="d-flex">
      <div class="form-group has-search mr-2">
        <span class="fa fa-search form-control-feedback"></span>
        <input type="text" class="form-control searchInput" placeholder="Search" name="search">
      </div>
    </div>
  </div>
  <hr>
  <!--  <form>-->
  <!--    <div class="row mt-3 px-3">-->
  <!--      <div class="col-3 offset-1">-->
  <!--        <div class="d-flex p-1 align-items-center">-->
  <!--          <span class="w-100">Tên danh mục</span>-->
  <!--          <select class="form-control">-->
  <!--            <option value="Bánh">Bánh</option>-->
  <!--          </select>-->
  <!--        </div>-->
  <!--        <div class="d-flex p-1 align-items-center">-->
  <!--          <span class="w-100 align-middle">Thương hiệu</span>-->
  <!--          <select class="form-control">-->
  <!--            <option value="Kinh Đô">Kinh Đô</option>-->
  <!--          </select>-->
  <!--        </div>-->
  <!--        <div></div>-->
  <!--      </div>-->

  <!--      <div class="col-2">-->
  <!--        <div class="row pt-4">-->
  <!--          <button class="btn btn-primary w-50">Lọc</button>-->
  <!--        </div>-->
  <!--      </div>-->
  <!--      <div class="col-4"></div>-->
  <!--    </div>-->
  <!--  </form>-->
  <div class="row mt-3 px-3">
    <!--  Table grid -->
    <button class="btn btn-primary ml-2" data-toggle="modal" data-target="#modal-create-product"><span
      class="fa fa-plus-square"></span> Thêm mới
    </button>
    <table class="table table-bordered table-striped mt-3">
      <thead class="table-header">
      <tr>
        <th class="sticky-top">Mã Sản Phẩm</th>
        <th class="sticky-top">Tên Sản Phẩm</th>
        <th class="sticky-top">Giá Thành</th>
        <th class="sticky-top">Tên Danh Mục</th>
        <th class="sticky-top">Hạn Sử Dụng</th>
        <th class="sticky-top">Số Lượng</th>
        <th class="sticky-top">Tên Thương Hiệu</th>
        <th class="sticky-top">Sửa | Xóa</th>
      </tr>
      </thead>
      <tbody *ngIf="page">
      <!--    | orderBy: key: reverse | filter: filter"-->
      <tr *ngFor="let product of page.content">
        <td>
          <span>{{product.productId}}</span>
        </td>
        <td>
          <span>{{product.productName}}</span>
        </td>
        <td>
          <span>{{product.price}}</span>
        </td>
        <td>
          <span>{{product.category.categoryName}}</span>
        </td>
        <td>
          <span>{{product.expiryDate | date: "dd/MM/yyyy"}}</span>
        </td>
        <td>
          <span>{{product.quantity}}</span>
        </td>
        <td>
          <span>{{product.brand.brandName}}</span>
        </td>
        <td>
          <button class="border-0 mr-3 bg-transparent fas fa-pencil-alt test" data-toggle="modal"
                  data-target="#modal-edit-product" (click)="editProduct(product.productId)"></button>
          <button class="border-0 bg-transparent fa fa-trash" data-toggle="modal"
                  data-target="#modal-delete-product" (click)="deleteProduct(product.productId)"></button>
        </td>
      </tr>
      </tbody>
    </table>

    <!--  Pagination component-->
    <div class="row w-100">
      <div class="col-2"></div>
      <div class="col-8">
        <app-custom-pagination
          [page]="page"
          (nextPageEvent)="getNextPage()"
          (previousPageEvent)="getPreviousPage()"
          (pageSizeEvent)="getPageInNewSize($event)">
        </app-custom-pagination>
      </div>
      <div class="col-2"></div>
    </div>

<!--      Modal Create-->
    <div class="modal fade" id="modal-create-product" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true"
         data-backdrop="static">
      <div class="modal-dialog modal-lg-custom" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Thông tin mặt hàng- Thêm mới</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="container">
              <form [formGroup]="createProductForm" role="form">
                <!--wrapper-form-dialog-->
                <div class="row wrapper-form-dialog">
                  <div class="col-6">
                    <div class="form-group row">
                      <label for="forFieldName" class="col-sm-3 control-label">Tên Mặt Hàng*</label>
                      <div class="col-sm-9">
                        <input type="text" id="forFieldName" formControlName="productName" class="form-control" placeholder="Nhập Tên Mặt Hàng">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="forFieldQuantity" class="col-sm-3 control-label">Số Lượng*</label>
                      <div class="col-sm-6">
                        <input type="email" id="forFieldQuantity" formControlName="quantity" class="form-control" placeholder="Nhập Số Lượng">
                      </div>
                      <div class="col-sm-3">
                        <fieldset formGroupName="unit">
                          <select class="form-control col-form-label" formControlName="unitId">
                            <option *ngFor="let unit of unitList" [ngValue]="unit.unitId"
                                    [selected]="unit.unitId === productForm.value.unit.unitId">
                              {{unit.unitName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="createPrice" class="col-sm-3 control-label">Đơn Giá*</label>
                      <div class="col-sm-9">
                        <input type="text" id="createPrice" formControlName="price" class="form-control">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Hạn Sử Dụng*</label>
                      <div class="col-sm-9">
<!--                        <mat-form-field color="accent" appearance="fill">-->
<!--                          <input formControlName="expiryDate" matInput [matDatepicker]="picker1">-->
<!--                          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>-->
<!--                          <mat-datepicker #picker1 color="primary"></mat-datepicker>-->
<!--                        </mat-form-field>-->
                        <input type="text"  formControlName="expiryDate" class="form-control">
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Tên Danh Mục </label>
                      <div class="col-sm-9">
                        <fieldset formGroupName="category">
                          <select class="form-control col-form-label" formControlName="categoryId">
                            <option *ngFor="let category of categoryList" [ngValue]="category.categoryId"
                                    [selected]="category.categoryId === productForm.value.category.categoryId">
                              {{category.categoryName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Tên Thương Hiệu* </label>
                      <div class="col-sm-9">
                        <fieldset formGroupName="brand">
                          <select class="form-control col-form-label" formControlName="id">
                            <option *ngFor="let brand of brandList" [ngValue]="brand.id"
                                    [selected]="brand.id === productForm.value.brand.id">
                              {{brand.brandName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="createImgUrl" class="col-sm-3 control-label">Ảnh*</label>
                      <div class="col-sm-9">
                        <input type="text" id="createImgUrl" formControlName="imageUrl" class="form-control" autofocus>
                      </div>
                    </div>
                    <div class="d-flex justify-content-center">
                      <button type="button" (click)="onCreate()" class="btn btn-warning mr-2 " data-toggle="modal">
                        Thêm mới
                      </button>
                      <button type="button" class="btn btn-secondary " #closeCreateModal data-dismiss="modal">Hủy</button>
                    </div>
                  </div>
                </div>
              </form> <!-- /form -->
            </div> <!-- ./container -->
          </div>
        </div>
      </div>
    </div>
    <!--Modal Edit-->
    <div class="modal fade" id="modal-edit-product" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true"
         data-backdrop="static">
      <div class="modal-dialog modal-lg-custom" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Thông tin mặt hàng- Chỉnh sửa</h4>
            <button type="button"  class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="container">
              <form [formGroup]="productForm" role="form">
                <!--wrapper-form-dialog-->
                <div class="row wrapper-form-dialog">
                  <div class="col-6">
                    <div class="form-group row">
                      <label for="idProduct1" class="col-sm-3 control-label">Mã Mặt Hàng*</label>
                      <div class="col-sm-9">
                        <input type="text" disabled id="idProduct1" formControlName="productId" class="form-control" autofocus>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="nameProduct1" class="col-sm-3 control-label">Tên Mặt Hàng*</label>
                      <div class="col-sm-9">
                        <input type="text" id="nameProduct1" formControlName="productName" class="form-control" autofocus>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="amount1" class="col-sm-3 control-label">Số Lượng*</label>
                      <div class="col-sm-6">
                        <input type="email" id="amount1" formControlName="quantity" class="form-control">
                      </div>
                      <div class="col-sm-3">
                        <fieldset formGroupName="unit">
                          <select class="form-control col-form-label" formControlName="unitId">
                            <option *ngFor="let unit of unitList" [ngValue]="unit.unitId"
                                    [selected]="unit.unitId === productForm.value.unit.unitId">
                              {{unit.unitName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="price1" class="col-sm-3 control-label">Đơn Giá*</label>
                      <div class="col-sm-9">
                        <input type="text" id="price1" formControlName="price" class="form-control">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Hạn Sử Dụng*</label>
                      <div class="col-sm-9">
                        <mat-form-field color="accent" appearance="fill">
                          <input formControlName="expiryDate" matInput [matDatepicker]="picker2">
                          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                          <mat-datepicker #picker2 color="primary"></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Tên Danh Mục </label>
                      <div class="col-sm-9">
                        <fieldset formGroupName="category">
                          <select class="form-control col-form-label" formControlName="categoryId">
                            <option *ngFor="let category of categoryList" [ngValue]="category.categoryId"
                                    [selected]="category.categoryId === productForm.value.category.categoryId">
                              {{category.categoryName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-sm-3 control-label">Tên Thương Hiệu* </label>
                      <div class="col-sm-9">
                        <fieldset formGroupName="brand">
                          <select class="form-control col-form-label" formControlName="id">
                            <option *ngFor="let brand of brandList" [ngValue]="brand.id"
                                    [selected]="brand.id === productForm.value.brand.id">
                              {{brand.brandName}}
                            </option>
                          </select>
                        </fieldset>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="imgUrl" class="col-sm-3 control-label">Ảnh*</label>
                      <div class="col-sm-9">
                        <input type="text" id="imgUrl" formControlName="imageUrl" class="form-control" autofocus>
                      </div>
                    </div>
                    <div class="d-flex justify-content-center">
                      <button type="button"  class="btn btn-warning mr-2" (click)="onSubmitEdit()">
                        Chỉnh sửa
                      </button>
                      <button type="button"  class="btn btn-secondary" #closeEditModal data-dismiss ="modal">Hủy</button>
                    </div>
                  </div>
                </div>
              </form> <!-- /form -->
            </div> <!-- ./container -->
          </div>
        </div>
      </div>
    </div>
    <!--Modal Delete-->
    <div class="modal fade" id="modal-delete-product" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true"
         data-backdrop="static">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="exampleModalLabelDelete">Xác Nhận</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

            <h5 class="my-3">
              Bạn có chắc xóa mặt hàng <span class="text-danger font-weight-bold">{{productName}}</span> không?
            </h5>


          </div>
          <div class="modal-footer d-flex justify-content-center">
            <button type="button" class="btn btn-success" (click)="OnDelete()">Có</button>
            <button type="button" class="btn btn-secondary" #closeDeleteModal data-dismiss="modal">Không</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modal-2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true"
         data-backdrop="static">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="exampleModalLabel">Xác Nhận</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h5 class="my-3">
              Bạn có chắc xóa mặt hàng này không?
            </h5>
          </div>
          <div class="modal-footer d-flex justify-content-center">
            <button type="button" class="btn btn-success">Có</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Không</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
